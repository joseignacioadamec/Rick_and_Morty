import React from "react";
import { fireEvent, render, screen } from "@testing-library/react";
import { BrowserRouter as Router } from "react-router-dom"; // AsegÃºrate de importar BrowserRouter
import { AllUsers } from "../Components/AllUsers";

describe("AllUsers component", () => {
  test("renders Links", () => {
    const setIdOneUserMock = jest.fn();

    const allUsersData = [
      {
        id: 1,
        name: "User1",
        image: "image1.png",
        status: "Alive",
        species: "Human",
      },
      {
        id: 2,
        name: "User2",
        image: "image2.png",
        status: "Dead",
        species: "Alien",
      },
    ];

    render(
      <Router>
        <AllUsers
          allUsers={allUsersData}
          setAllUsers={() => {}}
          countAllUsers={allUsersData.length}
          countUsersAlive={0}
          countUsersDead={0}
          itemsPerPage={8}
          setIdOneUser={setIdOneUserMock}
          usersAlive={[]}
          setUsersAlive={() => {}}
          usersDead={[]}
          setUsersDead={() => {}}
        />
      </Router>
    );

    // Verificamos si los enlaces (Links) se muestran correctamente
    const linkElements = screen.getAllByRole("link");
    expect(linkElements).toHaveLength(allUsersData.length);

    // Iteramos sobre los enlaces y verifica si se llama a setIdOneUserMock al hacer clic
    linkElements.forEach((linkElement, index) => {
      fireEvent.click(linkElement);
      expect(setIdOneUserMock).toHaveBeenCalledWith(allUsersData[index].id);
    });
  });
});
